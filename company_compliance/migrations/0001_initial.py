# Generated by Django 4.2.7 on 2025-11-17 08:19

import datetime
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='AssessmentCampaign',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_user_id', models.IntegerField(blank=True, help_text='User ID who created this (from main DB)', null=True)),
                ('updated_by_user_id', models.IntegerField(blank=True, help_text='User ID who last updated this (from main DB)', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('name', models.CharField(help_text="Campaign name like 'Q1 2024 SOX Audit'", max_length=200)),
                ('description', models.TextField(blank=True)),
                ('start_date', models.DateField(help_text='Assessment start date')),
                ('end_date', models.DateField(help_text='Assessment end date')),
                ('status', models.CharField(choices=[('PLANNED', 'Planned'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('CANCELLED', 'Cancelled')], default='PLANNED', max_length=20)),
                ('total_controls', models.IntegerField(default=0, help_text='Total number of controls in this assessment')),
                ('completed_controls', models.IntegerField(default=0, help_text='Number of controls assessed')),
                ('completion_percentage', models.DecimalField(decimal_places=2, default=0, help_text='Completion percentage (0.00 to 100.00)', max_digits=5)),
                ('compliant_count', models.IntegerField(default=0, help_text='Number of compliant controls')),
                ('non_compliant_count', models.IntegerField(default=0, help_text='Number of non-compliant controls')),
                ('not_applicable_count', models.IntegerField(default=0, help_text='Number of N/A controls')),
                ('compliance_score', models.DecimalField(decimal_places=2, default=0, help_text='Overall compliance score (0.00 to 100.00)', max_digits=5)),
                ('created_by_username', models.CharField(help_text='Who created this campaign', max_length=150)),
            ],
            options={
                'db_table': 'assessment_campaigns',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='CompanyCategory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_user_id', models.IntegerField(blank=True, help_text='User ID who created this (from main DB)', null=True)),
                ('updated_by_user_id', models.IntegerField(blank=True, help_text='User ID who last updated this (from main DB)', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('name', models.CharField(max_length=100)),
                ('code', models.CharField(help_text="Short code like 'AC', 'CM'", max_length=10)),
                ('description', models.TextField(blank=True)),
                ('sort_order', models.PositiveIntegerField(default=1)),
                ('template_category_id', models.UUIDField(blank=True, help_text='ID of Category from templates_host', null=True)),
                ('is_custom', models.BooleanField(default=False, help_text='Is this a custom category added by company?')),
            ],
            options={
                'verbose_name_plural': 'Company Categories',
                'db_table': 'company_categories',
                'ordering': ['domain', 'sort_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='CompanyControl',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_user_id', models.IntegerField(blank=True, help_text='User ID who created this (from main DB)', null=True)),
                ('updated_by_user_id', models.IntegerField(blank=True, help_text='User ID who last updated this (from main DB)', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('control_code', models.CharField(help_text="Control code like 'AC-001'", max_length=20, validators=[django.core.validators.RegexValidator(message='Control code must be like AC-001, CM-001', regex='^[A-Z]{2,4}-\\d{3}$')])),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('objective', models.TextField(help_text='What this control aims to achieve')),
                ('control_type', models.CharField(choices=[('PREVENTIVE', 'Preventive'), ('DETECTIVE', 'Detective'), ('CORRECTIVE', 'Corrective')], default='PREVENTIVE', max_length=20)),
                ('frequency', models.CharField(choices=[('CONTINUOUS', 'Continuous'), ('DAILY', 'Daily'), ('WEEKLY', 'Weekly'), ('MONTHLY', 'Monthly'), ('QUARTERLY', 'Quarterly'), ('ANNUALLY', 'Annually')], default='MONTHLY', max_length=20)),
                ('risk_level', models.CharField(choices=[('HIGH', 'High'), ('MEDIUM', 'Medium'), ('LOW', 'Low')], default='MEDIUM', max_length=10)),
                ('sort_order', models.PositiveIntegerField(default=1)),
                ('template_control_id', models.UUIDField(blank=True, help_text='ID of Control from templates_host', null=True)),
                ('is_customized', models.BooleanField(default=False, help_text='Has company customized this control?')),
                ('can_customize', models.BooleanField(default=True, help_text='Is company allowed to customize this control?')),
                ('custom_title', models.CharField(blank=True, help_text="Company's custom title", max_length=200)),
                ('custom_description', models.TextField(blank=True, help_text="Company's custom description")),
                ('custom_objective', models.TextField(blank=True, help_text="Company's custom objective")),
                ('custom_procedures', models.TextField(blank=True, help_text='Company-specific implementation procedures')),
                ('customized_at', models.DateTimeField(blank=True, help_text='When control was customized', null=True)),
                ('customized_by_user_id', models.IntegerField(blank=True, help_text='User who customized this control', null=True)),
            ],
            options={
                'db_table': 'company_controls',
                'ordering': ['subcategory', 'sort_order', 'control_code'],
            },
        ),
        migrations.CreateModel(
            name='CompanyFramework',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_user_id', models.IntegerField(blank=True, help_text='User ID who created this (from main DB)', null=True)),
                ('updated_by_user_id', models.IntegerField(blank=True, help_text='User ID who last updated this (from main DB)', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('name', models.CharField(help_text="Short name like 'SOX', 'ISO27001'", max_length=50)),
                ('full_name', models.CharField(help_text="Full name like 'Sarbanes-Oxley Act'", max_length=200)),
                ('description', models.TextField(blank=True)),
                ('version', models.CharField(default='1.0', help_text="Version like '2024.1', '2022.1'", max_length=20)),
                ('effective_date', models.DateField(default=datetime.date.today, help_text='When this framework version becomes effective')),
                ('status', models.CharField(choices=[('DRAFT', 'Draft'), ('ACTIVE', 'Active'), ('DEPRECATED', 'Deprecated')], default='ACTIVE', max_length=20)),
                ('template_framework_id', models.UUIDField(help_text='ID of Framework from templates_host (public schema)')),
                ('is_customized', models.BooleanField(default=False, help_text='Has company customized this framework?')),
                ('customization_level', models.CharField(choices=[('VIEW_ONLY', 'View Only - No modifications'), ('CONTROL_LEVEL', 'Control Level - Can customize controls'), ('FULL', 'Full - Complete independence')], default='CONTROL_LEVEL', max_length=20)),
                ('is_template_synced', models.BooleanField(default=True, help_text='Is this still synced with template updates?')),
                ('custom_description', models.TextField(blank=True, help_text='Company-specific description')),
                ('subscribed_at', models.DateTimeField(default=django.utils.timezone.now, help_text='When company subscribed to this framework')),
            ],
            options={
                'db_table': 'company_frameworks',
                'ordering': ['name', 'version'],
            },
        ),
        migrations.CreateModel(
            name='ControlAssignment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_user_id', models.IntegerField(blank=True, help_text='User ID who created this (from main DB)', null=True)),
                ('updated_by_user_id', models.IntegerField(blank=True, help_text='User ID who last updated this (from main DB)', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('assigned_to_user_id', models.IntegerField(help_text='User ID from main database (auth_user)')),
                ('assigned_to_username', models.CharField(help_text='Cached username for quick display', max_length=150)),
                ('assigned_to_email', models.EmailField(help_text='Cached email for notifications', max_length=254)),
                ('assigned_by_user_id', models.IntegerField(help_text='User ID who made the assignment')),
                ('status', models.CharField(choices=[('PENDING', 'Pending - Not started'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('OVERDUE', 'Overdue'), ('REJECTED', 'Rejected')], default='PENDING', max_length=20)),
                ('priority', models.CharField(choices=[('HIGH', 'High'), ('MEDIUM', 'Medium'), ('LOW', 'Low')], default='MEDIUM', max_length=20)),
                ('due_date', models.DateField(blank=True, help_text='When control implementation is due', null=True)),
                ('completion_date', models.DateField(blank=True, help_text='When control was completed', null=True)),
                ('notes', models.TextField(blank=True, help_text='Assignment notes and instructions')),
                ('completion_notes', models.TextField(blank=True, help_text='Notes added upon completion')),
                ('notification_sent', models.BooleanField(default=False, help_text='Has assignment notification been sent?')),
                ('reminder_sent', models.BooleanField(default=False, help_text='Has reminder been sent?')),
                ('control', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assignments', to='company_compliance.companycontrol')),
            ],
            options={
                'db_table': 'control_assignments',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ComplianceReport',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_user_id', models.IntegerField(blank=True, help_text='User ID who created this (from main DB)', null=True)),
                ('updated_by_user_id', models.IntegerField(blank=True, help_text='User ID who last updated this (from main DB)', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('report_type', models.CharField(choices=[('SUMMARY', 'Summary Report'), ('DETAILED', 'Detailed Report'), ('EXECUTIVE', 'Executive Summary'), ('AUDIT', 'Audit Report'), ('GAP_ANALYSIS', 'Gap Analysis')], default='SUMMARY', max_length=50)),
                ('report_format', models.CharField(choices=[('PDF', 'PDF'), ('EXCEL', 'Excel'), ('HTML', 'HTML'), ('JSON', 'JSON')], default='PDF', max_length=20)),
                ('title', models.CharField(help_text='Report title', max_length=200)),
                ('description', models.TextField(blank=True, help_text='Report description')),
                ('file_path', models.CharField(blank=True, help_text='Path to generated report file', max_length=1000)),
                ('file_size', models.BigIntegerField(blank=True, help_text='File size in bytes', null=True)),
                ('overall_compliance_score', models.DecimalField(decimal_places=2, default=0, help_text='Overall compliance score (0.00 to 100.00)', max_digits=5)),
                ('total_controls', models.IntegerField(default=0, help_text='Total controls assessed')),
                ('compliant_controls', models.IntegerField(default=0, help_text='Number of compliant controls')),
                ('non_compliant_controls', models.IntegerField(default=0, help_text='Number of non-compliant controls')),
                ('not_applicable_controls', models.IntegerField(default=0, help_text='Number of N/A controls')),
                ('report_period_start', models.DateField(blank=True, help_text='Start date of reporting period', null=True)),
                ('report_period_end', models.DateField(blank=True, help_text='End date of reporting period', null=True)),
                ('generated_by_user_id', models.IntegerField(help_text='User who generated this report')),
                ('generated_by_username', models.CharField(help_text='Username for display', max_length=150)),
                ('generated_at', models.DateTimeField(default=django.utils.timezone.now, help_text='When report was generated')),
                ('is_final', models.BooleanField(default=False, help_text='Is this the final version?')),
                ('is_published', models.BooleanField(default=False, help_text='Has this been published/shared?')),
                ('campaign', models.ForeignKey(blank=True, help_text='Associated campaign (if report is for specific campaign)', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='reports', to='company_compliance.assessmentcampaign')),
                ('framework', models.ForeignKey(help_text='Framework this report covers', on_delete=django.db.models.deletion.CASCADE, related_name='reports', to='company_compliance.companyframework')),
            ],
            options={
                'db_table': 'compliance_reports',
                'ordering': ['-generated_at'],
            },
        ),
        migrations.CreateModel(
            name='CompanySubcategory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_user_id', models.IntegerField(blank=True, help_text='User ID who created this (from main DB)', null=True)),
                ('updated_by_user_id', models.IntegerField(blank=True, help_text='User ID who last updated this (from main DB)', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('name', models.CharField(max_length=100)),
                ('code', models.CharField(help_text="Short code like 'UAM', 'SAM'", max_length=10)),
                ('description', models.TextField(blank=True)),
                ('sort_order', models.PositiveIntegerField(default=1)),
                ('template_subcategory_id', models.UUIDField(blank=True, help_text='ID of Subcategory from templates_host', null=True)),
                ('is_custom', models.BooleanField(default=False, help_text='Is this a custom subcategory added by company?')),
                ('category', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='subcategories', to='company_compliance.companycategory')),
            ],
            options={
                'verbose_name_plural': 'Company Subcategories',
                'db_table': 'company_subcategories',
                'ordering': ['category', 'sort_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='CompanyEvidenceRequirement',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_user_id', models.IntegerField(blank=True, help_text='User ID who created this (from main DB)', null=True)),
                ('updated_by_user_id', models.IntegerField(blank=True, help_text='User ID who last updated this (from main DB)', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('evidence_type', models.CharField(choices=[('DOCUMENT', 'Document'), ('SCREENSHOT', 'Screenshot'), ('VIDEO', 'Video'), ('LOG_FILE', 'Log File'), ('REPORT', 'Report'), ('POLICY', 'Policy'), ('PROCEDURE', 'Procedure')], default='DOCUMENT', max_length=20)),
                ('is_mandatory', models.BooleanField(default=True)),
                ('file_format', models.CharField(blank=True, help_text="Accepted file formats like 'PDF, DOC, XLSX'", max_length=50)),
                ('sort_order', models.PositiveIntegerField(default=1)),
                ('template_evidence_id', models.UUIDField(blank=True, help_text='ID of EvidenceRequirement from templates_host', null=True)),
                ('is_custom', models.BooleanField(default=False, help_text='Is this a custom evidence requirement added by company?')),
                ('control', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='evidence_requirements', to='company_compliance.companycontrol')),
            ],
            options={
                'db_table': 'company_evidence_requirements',
                'ordering': ['control', 'sort_order'],
            },
        ),
        migrations.CreateModel(
            name='CompanyDomain',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_user_id', models.IntegerField(blank=True, help_text='User ID who created this (from main DB)', null=True)),
                ('updated_by_user_id', models.IntegerField(blank=True, help_text='User ID who last updated this (from main DB)', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('name', models.CharField(max_length=100)),
                ('code', models.CharField(help_text="Short code like 'ITGC', 'BPC'", max_length=10)),
                ('description', models.TextField(blank=True)),
                ('sort_order', models.PositiveIntegerField(default=1)),
                ('template_domain_id', models.UUIDField(blank=True, help_text='ID of Domain from templates_host (if copied from template)', null=True)),
                ('is_custom', models.BooleanField(default=False, help_text='Is this a custom domain added by company?')),
                ('framework', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='domains', to='company_compliance.companyframework')),
            ],
            options={
                'db_table': 'company_domains',
                'ordering': ['framework', 'sort_order', 'name'],
            },
        ),
        migrations.AddField(
            model_name='companycontrol',
            name='subcategory',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='controls', to='company_compliance.companysubcategory'),
        ),
        migrations.AddField(
            model_name='companycategory',
            name='domain',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='categories', to='company_compliance.companydomain'),
        ),
        migrations.CreateModel(
            name='CompanyAssessmentQuestion',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_user_id', models.IntegerField(blank=True, help_text='User ID who created this (from main DB)', null=True)),
                ('updated_by_user_id', models.IntegerField(blank=True, help_text='User ID who last updated this (from main DB)', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('question', models.TextField()),
                ('question_type', models.CharField(choices=[('YES_NO', 'Yes/No'), ('MULTIPLE_CHOICE', 'Multiple Choice'), ('TEXT', 'Text Response'), ('NUMERIC', 'Numeric'), ('DATE', 'Date')], default='YES_NO', max_length=20)),
                ('options', models.JSONField(blank=True, help_text='For multiple choice questions - list of options', null=True)),
                ('is_mandatory', models.BooleanField(default=True)),
                ('sort_order', models.PositiveIntegerField(default=1)),
                ('template_question_id', models.UUIDField(blank=True, help_text='ID of AssessmentQuestion from templates_host', null=True)),
                ('is_custom', models.BooleanField(default=False, help_text='Is this a custom question added by company?')),
                ('control', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assessment_questions', to='company_compliance.companycontrol')),
            ],
            options={
                'db_table': 'company_assessment_questions',
                'ordering': ['control', 'sort_order'],
            },
        ),
        migrations.CreateModel(
            name='AssessmentResponse',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_user_id', models.IntegerField(blank=True, help_text='User ID who created this (from main DB)', null=True)),
                ('updated_by_user_id', models.IntegerField(blank=True, help_text='User ID who last updated this (from main DB)', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('response', models.CharField(choices=[('COMPLIANT', 'Compliant'), ('NON_COMPLIANT', 'Non-Compliant'), ('PARTIAL', 'Partially Compliant'), ('NOT_APPLICABLE', 'Not Applicable'), ('PENDING', 'Pending Review')], default='PENDING', max_length=20)),
                ('compliance_status', models.CharField(blank=True, choices=[('PASS', 'Pass'), ('FAIL', 'Fail'), ('PARTIAL', 'Partial'), ('N/A', 'Not Applicable')], max_length=20, null=True)),
                ('confidence_level', models.CharField(choices=[('HIGH', 'High Confidence'), ('MEDIUM', 'Medium Confidence'), ('LOW', 'Low Confidence')], default='MEDIUM', max_length=20)),
                ('notes', models.TextField(blank=True, help_text='Assessment notes and findings')),
                ('issues_identified', models.TextField(blank=True, help_text='Issues or gaps identified')),
                ('remediation_required', models.BooleanField(default=False, help_text='Does this require remediation?')),
                ('remediation_plan', models.TextField(blank=True, help_text='Plan to address issues')),
                ('responded_by_user_id', models.IntegerField(help_text='User who submitted this response')),
                ('responded_by_username', models.CharField(help_text='Username for display', max_length=150)),
                ('responded_at', models.DateTimeField(blank=True, help_text='When response was submitted', null=True)),
                ('reviewed_by_user_id', models.IntegerField(blank=True, help_text='User who reviewed this response', null=True)),
                ('reviewed_at', models.DateTimeField(blank=True, help_text='When response was reviewed', null=True)),
                ('review_notes', models.TextField(blank=True, help_text="Reviewer's notes")),
                ('assignment', models.ForeignKey(blank=True, help_text='Link to assignment if this control was assigned', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assessment_responses', to='company_compliance.controlassignment')),
                ('campaign', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='responses', to='company_compliance.assessmentcampaign')),
                ('control', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assessment_responses', to='company_compliance.companycontrol')),
            ],
            options={
                'db_table': 'assessment_responses',
                'ordering': ['-responded_at'],
            },
        ),
        migrations.AddField(
            model_name='assessmentcampaign',
            name='framework',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assessment_campaigns', to='company_compliance.companyframework'),
        ),
        migrations.CreateModel(
            name='EvidenceDocument',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by_user_id', models.IntegerField(blank=True, help_text='User ID who created this (from main DB)', null=True)),
                ('updated_by_user_id', models.IntegerField(blank=True, help_text='User ID who last updated this (from main DB)', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('file_name', models.CharField(help_text='Original file name', max_length=500)),
                ('file_path', models.CharField(help_text='Path to file in storage (S3, local, etc.)', max_length=1000)),
                ('file_size', models.BigIntegerField(help_text='File size in bytes')),
                ('file_type', models.CharField(help_text='MIME type (application/pdf, image/png, etc.)', max_length=100)),
                ('file_extension', models.CharField(help_text='File extension (.pdf, .docx, .xlsx)', max_length=10)),
                ('title', models.CharField(help_text='Document title/description', max_length=200)),
                ('description', models.TextField(blank=True, help_text='Detailed description')),
                ('tags', models.JSONField(blank=True, default=list, help_text="Tags for categorization ['policy', 'screenshot', 'audit-log']")),
                ('uploaded_by_user_id', models.IntegerField(help_text='User who uploaded this')),
                ('uploaded_by_username', models.CharField(help_text='Username for display', max_length=150)),
                ('uploaded_at', models.DateTimeField(default=django.utils.timezone.now, help_text='When file was uploaded')),
                ('is_archived', models.BooleanField(default=False, help_text='Is this document archived?')),
                ('archived_at', models.DateTimeField(blank=True, help_text='When document was archived', null=True)),
                ('is_verified', models.BooleanField(default=False, help_text='Has this evidence been verified?')),
                ('verified_by_user_id', models.IntegerField(blank=True, help_text='User who verified this', null=True)),
                ('verified_at', models.DateTimeField(blank=True, help_text='When verified', null=True)),
                ('control', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='evidence_documents', to='company_compliance.companycontrol')),
                ('response', models.ForeignKey(blank=True, help_text='Link to assessment response if applicable', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='evidence_documents', to='company_compliance.assessmentresponse')),
            ],
            options={
                'db_table': 'evidence_documents',
                'ordering': ['-uploaded_at'],
                'indexes': [models.Index(fields=['control'], name='evidence_do_control_d72393_idx'), models.Index(fields=['uploaded_by_user_id'], name='evidence_do_uploade_c33a4e_idx'), models.Index(fields=['is_archived'], name='evidence_do_is_arch_ac04e5_idx')],
            },
        ),
        migrations.AddIndex(
            model_name='controlassignment',
            index=models.Index(fields=['assigned_to_user_id', 'status'], name='control_ass_assigne_1889e7_idx'),
        ),
        migrations.AddIndex(
            model_name='controlassignment',
            index=models.Index(fields=['status', 'due_date'], name='control_ass_status_e50b57_idx'),
        ),
        migrations.AddIndex(
            model_name='controlassignment',
            index=models.Index(fields=['control'], name='control_ass_control_b561f5_idx'),
        ),
        migrations.AddIndex(
            model_name='compliancereport',
            index=models.Index(fields=['framework'], name='compliance__framewo_2659a6_idx'),
        ),
        migrations.AddIndex(
            model_name='compliancereport',
            index=models.Index(fields=['campaign'], name='compliance__campaig_118971_idx'),
        ),
        migrations.AddIndex(
            model_name='compliancereport',
            index=models.Index(fields=['generated_at'], name='compliance__generat_e629d2_idx'),
        ),
        migrations.AddIndex(
            model_name='companycontrol',
            index=models.Index(fields=['control_code'], name='company_con_control_a8f82a_idx'),
        ),
        migrations.AddIndex(
            model_name='companycontrol',
            index=models.Index(fields=['is_customized'], name='company_con_is_cust_4e9079_idx'),
        ),
        migrations.AddIndex(
            model_name='assessmentresponse',
            index=models.Index(fields=['campaign', 'response'], name='assessment__campaig_83ed1b_idx'),
        ),
        migrations.AddIndex(
            model_name='assessmentresponse',
            index=models.Index(fields=['control'], name='assessment__control_ff77ba_idx'),
        ),
        migrations.AddIndex(
            model_name='assessmentresponse',
            index=models.Index(fields=['responded_by_user_id'], name='assessment__respond_96329c_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='assessmentresponse',
            unique_together={('campaign', 'control')},
        ),
        migrations.AddIndex(
            model_name='assessmentcampaign',
            index=models.Index(fields=['framework', 'status'], name='assessment__framewo_b3fe7d_idx'),
        ),
        migrations.AddIndex(
            model_name='assessmentcampaign',
            index=models.Index(fields=['start_date', 'end_date'], name='assessment__start_d_28f689_idx'),
        ),
    ]
